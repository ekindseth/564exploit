#list commands for the implant 
#self destruct 
#fetch whole document 
#fetch new changes 
#add user/password mapping 
#delete user 
#get user 
#sleep 
#organize exfil of data 
import socket
import sys


def destruct(s: socket.socket, args: list):
    s.sendall(f"DESTRUCT")


def fetchAll(s, args):
    pass


def fetchNew(s, args):
    pass


def addUser(s, args):
    pass


def removeUser(s, args):
    pass


def getUser(s, args):
    pass


def sleep(s, args):
    pass

if __name__ == "__main__":
    argv_len = len(sys.argv)
    if argv_len > 5:
        print('incorret useage. format should follow:')
        print('python C2.py Server_IP Server_Port Command args')
        exit()
    serverIP = sys.argv[2]
    serverPort = sys.argv[3]
    command = sys.argv[4].upper()
    if argv_len <= 5:
        args = sys.argv[5:]
    with socket.socket(socket.AF_INET, socket.SOCK_STREAM) as s:
        s.connect(serverIP, int(serverPort))
        if command == "DESTRUCT":
            destruct(s, args)
        elif command == "FETCHALL":
            fetchAll(s, args)
        elif command == "FETCHNEW":
            fetchNew(s, args)
        elif command == "ADDUSER":
            addUser(s, args)
        elif command == "REMOVEUSER":
            removeUser(s, args)
        elif command == "GETUSER":
            getUser(s, args)
        elif command == "SLEEP":
            sleep(s, args)
        else:
            print(f"{command} is not a proper command")
